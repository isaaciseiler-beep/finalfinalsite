@import url('https://api.fontshare.com/v2/css?f[]=switzer@400,500,600,700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: dark; }

html, body { @apply bg-bg text-fg antialiased font-sans; }

* { scrollbar-width: thin; scrollbar-color: #333 #111; }
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #111; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 8px; }

:focus-visible { outline: none; box-shadow: 0 0 0 2px #fff, 0 0 0 4px #000; }
a { @apply underline-offset-4 hover:underline; }

/* never underline the contact tiles (global <a> rule would otherwise force underline) */
a.contact-tile,
a.contact-tile:hover {
  text-decoration: none !important;
}

.card { @apply rounded-2xl border border-border bg-black/40 shadow-subtle; }
.hr { @apply border-t border-border; }

/* type rhythm using Switzer */
h1 { @apply tracking-tight text-[clamp(28px,6vw,48px)] font-semibold leading-[1.02]; }
h2 { @apply tracking-tight text-[clamp(20px,3.5vw,28px)] font-medium; }
p, li { @apply tracking-tight; }

/* ----------------------------------------------
   contact page: square plates -> jelly blob circles
   ---------------------------------------------- */

.contact-tile {
  /* pointer-driven vars */
  --mx: 0px;
  --my: 0px;
  --hx: 0px;
  --hy: 0px;
  --rx: 0deg;
  --ry: 0deg;

  /* blob defaults */
  --blob: #ffffff;
  --blob-scale: 0.001;
  --blob-opacity: 0;
  --plate-opacity: 1;

  position: relative;
  overflow: hidden;
  isolation: isolate;

  border-radius: 28px;
  transition:
    border-radius 520ms cubic-bezier(0.2, 0.9, 0.2, 1.1),
    transform 160ms ease;
}

.contact-tile--square {
  width: min(54vmin, 560px);
  height: min(54vmin, 560px);
}

@media (min-width: 768px) {
  .contact-tile--square {
    width: min(46vmin, 560px);
    height: min(46vmin, 560px);
  }
}

.contact-tile:hover {
  --blob-scale: 1;
  --blob-opacity: 1;
  --plate-opacity: 0;
  border-radius: 9999px; /* square -> circle */
}

.contact-tile:active {
  transform: scale(0.985);
}

.contact-tile__plate {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: #ffffff;
  border: 1px solid rgba(0, 0, 0, 0.10);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.04),
    0 18px 50px rgba(0, 0, 0, 0.45);
  opacity: var(--plate-opacity);
  transition:
    opacity 260ms ease,
    border-radius 520ms cubic-bezier(0.2, 0.9, 0.2, 1.1),
    transform 420ms cubic-bezier(0.2, 0.9, 0.2, 1.1);
  pointer-events: none;
  z-index: 0;
}

.contact-tile:hover .contact-tile__plate {
  transform: translate3d(0, 10px, 0) scale(0.985);
}

/* blob layer (fills the tile) */
.contact-tile__blobCenter {
  position: absolute;
  inset: 0;
  opacity: var(--blob-opacity);
  transform: translate3d(var(--mx), var(--my), 0) scale(var(--blob-scale));
  transition:
    transform 140ms cubic-bezier(0.2, 0.9, 0.2, 1.35),
    opacity 220ms ease;
  will-change: transform, opacity;
  filter: drop-shadow(0 38px 86px rgba(0, 0, 0, 0.68));
  pointer-events: none;
  z-index: 1;

  display: grid;
  place-items: center;
}

/* critical: these MUST be block-level or they have no width/height (your “blob not populating” bug) */
.contact-tile__blobTilt,
.contact-tile__blob {
  display: block;
  width: 100%;
  height: 100%;
}

.contact-tile__blobTilt {
  transform: rotateX(var(--rx)) rotateY(var(--ry));
  transform-style: preserve-3d;
  transition: transform 170ms cubic-bezier(0.2, 0.9, 0.2, 1.35);
}

.contact-tile__blob {
  position: relative;
  background: var(--blob);
  border-radius: 50%;
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.22),
    inset 0 -34px 90px rgba(0, 0, 0, 0.22);
  animation:
    contactBlobMorph 7.6s ease-in-out infinite,
    contactBlobSquish 1.45s ease-in-out infinite;
  will-change: border-radius, transform;
}

.contact-tile__shine {
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background:
    radial-gradient(
      circle at calc(50% + var(--hx)) calc(35% + var(--hy)),
      rgba(255, 255, 255, 0.78),
      rgba(255, 255, 255, 0) 58%
    ),
    radial-gradient(
      circle at calc(65% - var(--hx)) calc(75% - var(--hy)),
      rgba(0, 0, 0, 0.28),
      rgba(0, 0, 0, 0) 60%
    );
  mix-blend-mode: soft-light;
  opacity: 0.95;
  filter: blur(0.15px);
  pointer-events: none;
}

.contact-tile__rim {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.16),
    inset 0 10px 40px rgba(255, 255, 255, 0.06);
  opacity: 0.9;
  pointer-events: none;
}

@keyframes contactBlobMorph {
  0%,
  100% { border-radius: 50%; }
  18% { border-radius: 56% 44% 52% 48% / 52% 56% 44% 48%; }
  40% { border-radius: 46% 54% 44% 56% / 58% 45% 55% 42%; }
  62% { border-radius: 54% 46% 58% 42% / 44% 58% 42% 56%; }
  82% { border-radius: 49% 51% 50% 50% / 46% 54% 46% 54%; }
}

@keyframes contactBlobSquish {
  0%,
  100% { transform: translate3d(0, 0, 0) rotate(0deg) scale(1); }
  25% { transform: translate3d(0, 0, 0) rotate(0.9deg) scale(1.02, 0.985); }
  50% { transform: translate3d(0, 0, 0) rotate(-0.8deg) scale(0.985, 1.03); }
  75% { transform: translate3d(0, 0, 0) rotate(0.6deg) scale(1.01, 0.995); }
}

@media (prefers-reduced-motion: reduce) {
  .contact-tile__blobCenter,
  .contact-tile__blobTilt,
  .contact-tile__plate {
    transition: none !important;
  }
  .contact-tile__blob {
    animation: none !important;
  }
}
