@import url('https://api.fontshare.com/v2/css?f[]=switzer@400,500,600,700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: dark; }

html, body { @apply bg-bg text-fg antialiased font-sans; }

* { scrollbar-width: thin; scrollbar-color: #333 #111; }
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #111; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 8px; }

:focus-visible { outline: none; box-shadow: 0 0 0 2px #fff, 0 0 0 4px #000; }
a { @apply underline-offset-4 hover:underline; }

/* never underline the contact tiles (global <a> rule would otherwise force underline) */
a.contact-tile,
a.contact-tile:hover {
  text-decoration: none !important;
}

.card { @apply rounded-2xl border border-border bg-black/40 shadow-subtle; }
.hr { @apply border-t border-border; }

/* type rhythm using Switzer */
h1 { @apply tracking-tight text-[clamp(28px,6vw,48px)] font-semibold leading-[1.02]; }
h2 { @apply tracking-tight text-[clamp(20px,3.5vw,28px)] font-medium; }
p, li { @apply tracking-tight; }

/* ----------------------------------------------
   contact page: rounded-square plates + 3d gel blobs
   ---------------------------------------------- */

.contact-tile {
  /* pointer-driven vars */
  --mx: 0px;
  --my: 0px;
  --hx: 0px;
  --hy: 0px;
  --rx: 0deg;
  --ry: 0deg;

  /* blob color */
  --blob: #ffffff;

  position: relative;
  overflow: hidden;
  isolation: isolate;

  border-radius: 28px !important; /* keep corners stable (no circle transition) */
  cursor: pointer;

  background: #050505;
  border: 1px solid rgba(255, 255, 255, 0.07);
  box-shadow: 0 0 26px rgba(0,0,0,0.45);
  transition: transform 160ms ease;
}

.contact-tile:active { transform: scale(0.985); }

.contact-tile--square {
  width: min(56vmin, 560px);
  height: min(56vmin, 560px);
}

@media (min-width: 768px) {
  .contact-tile--square {
    width: min(46vmin, 560px);
    height: min(46vmin, 560px);
  }
}

/* plate = always-on animated dark gradient (never “pure black”) */
.contact-tile__plate {
  position: absolute;
  inset: 0;
  border-radius: 28px; /* explicit, no inherit edge cases */
  pointer-events: none;
  z-index: 0;

  background:
    radial-gradient(120% 140% at 50% 12%, rgba(255,255,255,0.06), transparent 68%),
    linear-gradient(180deg, rgba(255,255,255,0.035), rgba(0,0,0,0) 60%),
    #050505;

  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.035),
    inset 0 -28px 70px rgba(0,0,0,0.55);

  opacity: 1;
  transform: translate3d(0,0,0);
  transition:
    opacity 280ms ease,
    transform 520ms cubic-bezier(0.2, 0.9, 0.2, 1.1);
}

.contact-tile__plate::before,
.contact-tile__plate::after {
  content: "";
  position: absolute;
  inset: -14%;
  border-radius: inherit;
  pointer-events: none;
  will-change: transform, opacity;
}

/* wave a */
.contact-tile__plate::before {
  background: radial-gradient(
    140% 220% at 0% 60%,
    rgba(255,255,255,0.085),
    transparent 65%
  );
  filter: blur(18px);
  opacity: 0.62;
  transform: translate3d(-18%, 0, 0);
  animation:
    contactWaveA 14s ease-in-out infinite alternate,
    contactWavePulse 12s ease-in-out infinite;
}

/* wave b */
.contact-tile__plate::after {
  background: radial-gradient(
    130% 210% at 100% 40%,
    rgba(255,255,255,0.07),
    transparent 65%
  );
  filter: blur(20px);
  opacity: 0.55;
  transform: translate3d(20%, -6%, 0);
  animation:
    contactWaveB 16s ease-in-out infinite alternate,
    contactWavePulse 13.5s ease-in-out infinite;
}

/* on hover: plate stays visible (prevents “disappearing”), just recedes */
.contact-tile:hover .contact-tile__plate {
  opacity: 0.22;
  transform: translate3d(0, 6px, 0) scale(0.995);
}

@keyframes contactWaveA {
  from { transform: translate3d(-18%, 0, 0); }
  to   { transform: translate3d(26%, 0, 0); }
}

@keyframes contactWaveB {
  from { transform: translate3d(20%, -6%, 0); }
  to   { transform: translate3d(-10%, 6%, 0); }
}

@keyframes contactWavePulse {
  0%, 100% { opacity: 0.52; }
  50%      { opacity: 0.82; }
}

/* blob layer */
.contact-tile__blobCenter {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  pointer-events: none;
  z-index: 1;

  /* default hidden (no css vars for visibility -> fixes “not populating”) */
  opacity: 0;
  transform: translate3d(var(--mx), var(--my), 0) scale(0.72);
  transition:
    opacity 240ms ease,
    transform 180ms cubic-bezier(0.2, 0.9, 0.2, 1.35);

  filter: drop-shadow(0 34px 78px rgba(0, 0, 0, 0.68));
}

.contact-tile:hover .contact-tile__blobCenter {
  opacity: 1;
  transform: translate3d(var(--mx), var(--my), 0) scale(1);
}

.contact-tile:active .contact-tile__blobCenter {
  transform: translate3d(var(--mx), var(--my), 0) scale(0.965);
}

.contact-tile__blobTilt,
.contact-tile__blob {
  display: block;
}

.contact-tile__blobTilt {
  width: 78%;
  height: 78%;
  transform: rotateX(var(--rx)) rotateY(var(--ry));
  transform-style: preserve-3d;
  transition: transform 180ms cubic-bezier(0.2, 0.9, 0.2, 1.35);
}

.contact-tile:hover .contact-tile__blobTilt {
  transform: rotateX(var(--rx)) rotateY(var(--ry)) scale(1.02);
}

.contact-tile__blob {
  position: relative;
  width: 100%;
  height: 100%;

  /* 3d shading built into the blob color */
  background:
    radial-gradient(
      140% 140% at calc(32% + var(--hx)) calc(24% + var(--hy)),
      rgba(255,255,255,0.58),
      rgba(255,255,255,0) 56%
    ),
    radial-gradient(
      160% 160% at calc(70% - var(--hx)) calc(80% - var(--hy)),
      rgba(0,0,0,0.36),
      rgba(0,0,0,0) 64%
    ),
    radial-gradient(
      220% 150% at 50% 118%,
      rgba(255,255,255,0.16),
      rgba(255,255,255,0) 62%
    ),
    var(--blob);

  border-radius: 50%;
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.20),
    inset 0 -40px 110px rgba(0, 0, 0, 0.28);

  filter: saturate(1.08) contrast(1.06);

  /* less uniform silhouette + subtle “gel wobble” */
  animation:
    contactBlobEdge 7.2s ease-in-out infinite,
    contactBlobWobble 1.25s ease-in-out infinite;

  will-change: border-radius, transform;
}

.contact-tile__shine {
  position: absolute;
  inset: -3px;
  border-radius: inherit;
  background: radial-gradient(
    circle at calc(36% + var(--hx)) calc(28% + var(--hy)),
    rgba(255,255,255,0.92),
    rgba(255,255,255,0) 60%
  );
  opacity: 0.55;
  filter: blur(4px);
  mix-blend-mode: screen;
  pointer-events: none;
}

.contact-tile__rim {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.18),
    inset 0 18px 52px rgba(255,255,255,0.06);
  opacity: 0.9;
  pointer-events: none;
}

@keyframes contactBlobEdge {
  0%, 100% { border-radius: 52% 48% 55% 45% / 48% 55% 45% 52%; }
  16%      { border-radius: 60% 40% 52% 48% / 50% 62% 38% 50%; }
  38%      { border-radius: 44% 56% 46% 54% / 58% 44% 56% 42%; }
  62%      { border-radius: 57% 43% 61% 39% / 41% 57% 43% 59%; }
  84%      { border-radius: 49% 51% 44% 56% / 55% 46% 54% 45%; }
}

@keyframes contactBlobWobble {
  0%, 100% { transform: rotate(0deg) scale(1); }
  33%      { transform: rotate(1.2deg) scale(1.035, 0.985); }
  66%      { transform: rotate(-1.0deg) scale(0.985, 1.04); }
}

@media (prefers-reduced-motion: reduce) {
  .contact-tile__plate,
  .contact-tile__plate::before,
  .contact-tile__plate::after,
  .contact-tile__blobCenter,
  .contact-tile__blobTilt {
    transition: none !important;
    animation: none !important;
  }
  .contact-tile__blob {
    animation: none !important;
  }
}
